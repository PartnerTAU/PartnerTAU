{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cohav\\\\Desktop\\\\PartnerTAU-1\\\\FrontEnd\\\\src\\\\pages\\\\protectedRoute\\\\protectedRoute.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ProtectedRoute = ({\n  component: Component,\n  ...rest\n}) => {\n  _s();\n\n  const history = useHistory();\n  return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n    render: props => {\n      const user = localStorage.getItem('token');\n\n      if (user) {\n        const token = localStorage.getItem('token');\n        var decodedToken = jwt_decode(token, {\n          complete: true\n        });\n        var dateNow = new Date();\n        var exp = new Date(decodedToken.exp);\n\n        if (exp < dateNow) {\n          return /*#__PURE__*/_jsxDEV(Component, { ...props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 28\n          }, this);\n        } else {\n          localStorage.removeItem('token');\n          history.push(\"/login\");\n          return /*#__PURE__*/_jsxDEV(Redirect, {\n            to: {\n              pathname: '/login'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 29\n          }, this);\n        }\n      } else {\n        history.push(\"/login\");\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: {\n            pathname: '/login'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 29\n        }, this);\n      }\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProtectedRoute, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n\n_c = ProtectedRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"sources":["C:/Users/cohav/Desktop/PartnerTAU-1/FrontEnd/src/pages/protectedRoute/protectedRoute.js"],"names":["React","Route","Redirect","useHistory","jwt_decode","moment","ProtectedRoute","component","Component","rest","history","props","user","localStorage","getItem","token","decodedToken","complete","dateNow","Date","exp","removeItem","push","pathname"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,EAAeC,QAAf,QAA8B,kBAA9B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAIA,OAAO,MAAMC,cAAc,GAAE,CAAC;AAACC,EAAAA,SAAS,EAAGC,SAAb;AAAwB,KAAGC;AAA3B,CAAD,KAAqC;AAAA;;AAC9D,QAAMC,OAAO,GAAGP,UAAU,EAA1B;AACA,sBACI,QAAC,KAAD,OAAWM,IAAX;AACA,IAAA,MAAM,EAAEE,KAAK,IAAI;AACb,YAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAb;;AACA,UAAGF,IAAH,EAAS;AAEL,cAAMG,KAAK,GAAGF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,YAAIE,YAAY,GAACZ,UAAU,CAACW,KAAD,EAAQ;AAACE,UAAAA,QAAQ,EAAE;AAAX,SAAR,CAA3B;AACA,YAAIC,OAAO,GAAG,IAAIC,IAAJ,EAAd;AACA,YAAIC,GAAG,GAAG,IAAID,IAAJ,CAASH,YAAY,CAACI,GAAtB,CAAV;;AAEA,YAAGA,GAAG,GAAGF,OAAT,EACA;AACI,8BAAO,QAAC,SAAD,OAAeP;AAAf;AAAA;AAAA;AAAA;AAAA,kBAAP;AACH,SAHD,MAKA;AACIE,UAAAA,YAAY,CAACQ,UAAb,CAAwB,OAAxB;AACAX,UAAAA,OAAO,CAACY,IAAR,CAAa,QAAb;AACA,8BAAQ,QAAC,QAAD;AAAa,YAAA,EAAE,EAAE;AACnBC,cAAAA,QAAQ,EAAC;AADU;AAAjB;AAAA;AAAA;AAAA;AAAA,kBAAR;AAGH;AAGJ,OArBD,MAuBA;AACIb,QAAAA,OAAO,CAACY,IAAR,CAAa,QAAb;AACI,4BAAQ,QAAC,QAAD;AAAa,UAAA,EAAE,EAAE;AACnBC,YAAAA,QAAQ,EAAC;AADU;AAAjB;AAAA;AAAA;AAAA;AAAA,gBAAR;AAIP;AAEA;AAlCL;AAAA;AAAA;AAAA;AAAA,UADJ;AAsCH,CAxCM;;GAAMjB,c;UACOH,U;;;KADPG,c","sourcesContent":["import React from 'react'\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport moment from 'moment'\r\n\r\n\r\n\r\nexport const ProtectedRoute =({component:  Component, ...rest}) =>{\r\n    const history = useHistory();\r\n    return (\r\n        <Route {...rest} \r\n        render={props => {\r\n            const user = localStorage.getItem('token')\r\n            if(user) {\r\n                \r\n                const token = localStorage.getItem('token');\r\n                var decodedToken=jwt_decode(token, {complete: true});\r\n                var dateNow = new Date();\r\n                var exp = new Date(decodedToken.exp);\r\n                \r\n                if(exp < dateNow)\r\n                {\r\n                    return <Component {...props}   />\r\n                }\r\n                else\r\n                {\r\n                    localStorage.removeItem('token')\r\n                    history.push(\"/login\")\r\n                    return  <Redirect    to={{\r\n                          pathname:'/login'\r\n                      }} />\r\n                }\r\n                   \r\n                \r\n            }\r\n            else\r\n            {\r\n                history.push(\"/login\")\r\n                    return  <Redirect    to={{\r\n                          pathname:'/login'\r\n                      }} />\r\n                 \r\n            }\r\n               \r\n            }}\r\n        /> \r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}